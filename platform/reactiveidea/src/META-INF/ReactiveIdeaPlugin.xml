<!--
  ~ Copyright 2000-2015 JetBrains s.r.o.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<idea-plugin version="2">
  <application-components>
    <component>
      <option name="overrides" value="true"/>
      <interface-class>com.intellij.ide.DataManager</interface-class>
      <implementation-class>com.jetbrains.reactiveidea.ServerDataManagerImpl</implementation-class>
    </component>

    <component>
      <option name="overrides" value="true"/>
      <interface-class>com.intellij.openapi.wm.WindowManager</interface-class>
      <implementation-class>com.jetbrains.reactiveidea.ServerWindowManager</implementation-class>
    </component>

    <component>
      <interface-class>com.jetbrains.reactiveidea.ReactiveModelsManager</interface-class>
      <implementation-class>com.jetbrains.reactiveidea.ReactiveModelsManager</implementation-class>
    </component>
  </application-components>

  <project-components>
    <component>
      <option name="overrides" value="true"/>
      <interface-class>com.intellij.openapi.wm.IdeFocusManager</interface-class>
      <implementation-class>com.intellij.openapi.wm.impl.IdeFocusManagerHeadless</implementation-class>
    </component>

    <component>
      <option name="overrides" value="true"/>
      <interface-class>com.intellij.openapi.wm.ToolWindowManager</interface-class>
      <implementation-class>com.intellij.openapi.wm.impl.ToolWindowHeadlessManagerImpl</implementation-class>
      <option name="workspace" value="true"/>
    </component>

    <component>
      <option name="overrides" value="true"/>
      <interface-class>com.intellij.openapi.fileEditor.ex.IdeDocumentHistory</interface-class>
      <implementation-class>com.jetbrains.reactiveidea.history.ServerIdeDocumentHistory</implementation-class>
    </component>

    <component>
      <option name="overrides" value="true"/>
      <interface-class>com.intellij.openapi.fileEditor.FileEditorManager</interface-class>
      <implementation-class>com.jetbrains.reactiveidea.ServerFileEditorManager</implementation-class>
    </component>

    <component>
      <option name="overrides" value="true"/>
      <interface-class>com.intellij.codeInsight.daemon.impl.EditorTracker</interface-class>
      <implementation-class>com.jetbrains.reactiveidea.ServerEditorTracker</implementation-class>
      <loadForDefaultProject/>
    </component>

  </project-components>

  <extensions defaultExtensionNs="com.intellij">

    <appStarter implementation="com.jetbrains.reactiveidea.ServerAppStarter"/>

    <projectService overrides="true"
                    serviceInterface="com.intellij.usages.UsageViewManager"
                    serviceImplementation="com.intellij.usages.impl.ServerUsageViewManager"/>

    <projectService overrides="true"
                    serviceInterface="com.intellij.ide.actions.ChooseByNameFactory"
                    serviceImplementation="com.jetbrains.reactiveidea.navigation.ModelChooseByNameFactory"/>

    <projectService overrides="true"
                    serviceInterface="com.intellij.usages.UsageViewManager"
                    serviceImplementation="com.intellij.usages.impl.ServerUsageViewManager"/>

    <applicationService overrides="true"
                        serviceInterface="com.intellij.openapi.ui.popup.JBPopupFactory"
                        serviceImplementation="com.jetbrains.reactiveidea.ModelPopupFactory"/>

    <applicationService overrides="true"
                        serviceInterface="com.intellij.codeInsight.lookup.impl.LookupUiFactory"
                        serviceImplementation="com.jetbrains.reactiveidea.ModelLookupUiFactory"/>

  </extensions>
</idea-plugin>